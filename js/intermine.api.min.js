(function(){var e,n,t,i,r,s,o,d,u,a,c,g,f,m,l,p,w,h=[].slice;if(d={widgets:{latest:"http://cdn.intermine.org/js/intermine/widgets/latest/intermine.widgets.js","1.0.0":"http://cdn.intermine.org/js/intermine/widgets/1.0.0/intermine.widgets.js","1.1.0":"http://cdn.intermine.org/js/intermine/widgets/1.1.0/intermine.widgets.js","1.1.7":"http://cdn.intermine.org/js/intermine/widgets/1.1.7/intermine.widgets.js","1.1.8":"http://cdn.intermine.org/js/intermine/widgets/1.1.8/intermine.widgets.js","1.1.9":"http://cdn.intermine.org/js/intermine/widgets/1.1.9/intermine.widgets.js","1.1.10":"http://cdn.intermine.org/js/intermine/widgets/1.1.10/intermine.widgets.js","1.2.0":"http://cdn.intermine.org/js/intermine/widgets/1.2.0/intermine.widgets.js","1.2.1":"http://cdn.intermine.org/js/intermine/widgets/1.2.1/intermine.widgets.js","1.3.0":"http://cdn.intermine.org/js/intermine/widgets/1.3.0/intermine.widgets.js","1.4.0":"http://cdn.intermine.org/js/intermine/widgets/1.4.0/intermine.widgets.js","1.4.1":"http://cdn.intermine.org/js/intermine/widgets/1.4.1/intermine.widgets.js","1.4.2":"http://cdn.intermine.org/js/intermine/widgets/1.4.2/intermine.widgets.js","1.6.7":"http://cdn.intermine.org/js/intermine/widgets/1.6.7/intermine.widgets.js","1.6.8":"http://cdn.intermine.org/js/intermine/widgets/1.6.8/intermine.widgets.js","1.7.0":"http://cdn.intermine.org/js/intermine/widgets/1.7.0/intermine.widgets.js","1.7.3":"http://cdn.intermine.org/js/intermine/widgets/1.7.3/intermine.widgets.js","1.8.0":"http://cdn.intermine.org/js/intermine/widgets/1.8.0/intermine.widgets.js","1.8.1":"http://cdn.intermine.org/js/intermine/widgets/1.8.1/intermine.widgets.js","1.8.2":"http://cdn.intermine.org/js/intermine/widgets/1.8.2/intermine.widgets.js","1.8.3":"http://cdn.intermine.org/js/intermine/widgets/1.8.3/intermine.widgets.js","1.9.1":"http://cdn.intermine.org/js/intermine/widgets/1.9.1/intermine.widgets.js","1.10.0":"http://cdn.intermine.org/js/intermine/widgets/1.10.0/intermine.widgets.js","1.11.2":"http://cdn.intermine.org/js/intermine/widgets/1.11.2/intermine.widgets.js"},"report-widgets":{latest:"http://cdn.intermine.org/js/intermine/report-widgets/latest/intermine.report-widgets.js","0.7.0":"http://cdn.intermine.org/js/intermine/report-widgets/0.7.0/intermine.report-widgets.js"}},u=this,u.intermine=t=u.intermine||{},u.window===void 0){if("undefined"==typeof global)throw"what kind of environment is this?";u.window=global}t.load||(t.loader={timeout:1e4,processing:50,fn:function(e,n,t){switch(null==n&&(n="js"),n){case"js":return f.script(e,t);case"css":return f.style(e,t);default:return t("Unrecognized type `"+n+"`")}}},s={},i=0,r=function(e,n,r){var d,g,f,l,p,h,j,y,v,b,x,O,T,k;p=++i,o({job:p,message:"start"}),y=function(e){var n,t,i,r,s;if(~e.indexOf("?"))return!1;for(n=u.window,s=e.split("."),i=0,r=s.length;r>i;i++){if(t=s[i],null==n[t])return!1;n=n[t]}return!0},l=!1,f=function(e){return l=!0,r(e)},j={},x=function(i,r){var d,a,c,g,m,h;if(o({job:p,library:i,message:"start"}),!l){if(c=r.path,g=r.test,a=r.depends,!c)return f("Library `path` not provided for "+i);if(g&&"function"==typeof g&&g()||y(i))return o({job:p,library:i,message:"exists"}),j[i]=function(e){return e(null)};if(s[i])return o({job:p,library:i,message:"will wait"}),j[i]=function(e){return s[i].push(e)};if(s[i]=[],o({job:p,library:i,message:"will download"}),j[i]=function(e){var r,d;return o({job:p,library:i,message:"downloading"}),d=u.window.setTimeout(function(){return o({job:p,library:i,message:"timed out"}),r("The library `"+i+"` has timed out")},t.loader.timeout),r=function(n){var r,a;if(!l)return clearTimeout(d),n?(delete s[i],f(n)):(o({job:p,library:i,message:"downloaded"}),a=function(){for(o({job:p,library:i,message:"ready"});0!==s[i].length;)s[i].pop()();return delete s[i],e(null)},d=u.window.setTimeout(a,t.loader.processing),(r=function(){return g&&"function"==typeof g&&g()||y(i)?(o({job:p,library:i,message:"exists"}),u.window.clearTimeout(d),a()):w(r)})())},t.loader.fn(c,n,r)},a&&a instanceof Array){for(m=0,h=a.length;h>m;m++)if(d=a[m],"string"!=typeof d||null==e[d])return delete s[i],f("Unrecognized dependency `"+d+"`");return j[i]=a.concat(j[i])}}};for(h in e)b=e[h],x(h,b);if(!l){g=[];for(h in j)b=j[h],b instanceof Array&&(v={},(d=function(e){var n,t,i,r,s;if("string"==typeof e)if(null!=v[e]){if(!c(g,e))return g.push(e)}else if(v[e]=!0,(t=j[e])instanceof Array){for(s=[],n=i=0,r=t.length-1;r>=0?r>i:i>r;n=r>=0?++i:--i)s.push(d(t[n]));return s}})(h));if(g.length){for(k=m(j),O=0,T=k.length;T>O;O++)h=k[O],delete s[h];return f("Circular dependencies detected for `"+g+"`")}return a(j,function(e){return e?r(e):r(null)})}},t.load=function(){var e,n,t,i,s,o,u,a,c,g,f,l,p,w,j;if(u=arguments[0],e=arguments.length>=2?h.call(arguments,1):[],n=1===arguments.length?u:e.pop(),p="latest","string"==typeof e[0]&&(p=e[0]),"function"!=typeof n&&(n=function(){}),"string"==typeof u)return d[u]?(g=d[u][p])?(c={},c["intermine."+u]={path:g},r(c,"js",n)):n("Unknown `"+u+"` version "+p):n("Unknown library `"+u+"`");if(u instanceof Array){c={js:{},css:{}};for(s in u){if(j=u[s],a=j.name,g=j.path,l=j.type,w=j.wait,!g&&!l)return n("Library `path` or `type` not provided");if("css"!==l&&"js"!==l)return n("Library type `"+l+"` not recognized");a||(a=g.split("/").pop()),u[s].name=a,c[l][a]={path:g},w&&parseInt(s)&&(c[l][a].depends=[u[s-1].name])}u=c}return"object"==typeof u?(s=m(u).length,t=!1,i=function(e){return t?void 0:e?(t=!0,n(e)):s--&&!s?n(null):void 0},function(){var e;e=[];for(o in u)f=u[o],e.push(r(f,o,i));return e}()):n("Unrecognized input")},t.log&&t.log instanceof Array||(t.log=[]),o=function(){var e;return t.log.push(["api-loader",(new Date).toLocaleString(),function(){var n,t,i;for(i=[],n=0,t=arguments.length;t>n;n++)e=arguments[n],i.push(JSON.stringify(e));return i}.apply(this,arguments).join(" ")])},w="undefined"!=typeof process&&process.nextTick?"undefined"!=typeof setImmediate?setImmediate:process.nextTick:"function"==typeof setImmediate?setImmediate:function(e){return setTimeout(e,0)},g=function(e,n){var t,i,r;if(e.forEach)return e.forEach(n);r=[];for(t in e)i=e[t],r.push(n(i,t,e));return r},l=function(e,n){var t;return e.map?e.map(n):(t=[],g(e,function(e,i,r){return t.push(n(e,i,r))}),t)},p=function(e,n,t){return e.reduce?e.reduce(n,t):(g(e,function(e,i,r){return t=n(t,e,i,r)}),t)},m=function(e){var n,t;if(Object.keys)return Object.keys(e);t=[];for(n in e)e.hasOwnProperty(n)&&t.push(n);return t},c=function(e,n){var t,i,r;if([].indexOf)return e.indexOf(n)>=0;for(i=0,r=e.length;r>i;i++)if(t=e[i],t===n)return!0;return!1},a=function(e,n){var t,i,r,s,o,d;return n=n||function(){},i=m(e),i.length?(o={},r=[],t=function(e){return r.unshift(e)},s=function(e){var n,t;for(n in r)if(t=r[n],t===e)return r.splice(n,1),void 0},d=function(){return g(r.slice(0),function(e){return e()})},t(function(){return m(o).length===i.length?(n(null,o),n=function(){}):void 0}),g(i,function(i){var r,u,a,c,f;return c=e[i]instanceof Function?[e[i]]:e[i],f=function(e){var t,r;return t=Array.prototype.slice.call(arguments,1),1>=t.length&&(t=t[0]),e?(r={},g(m(o),function(e){return r[e]=o[e]}),r[i]=t,n(e,r),n=function(){}):(o[i]=t,w(d))},a=c.slice(0,Math.abs(c.length-1))||[],u=function(){return p(a,function(e,n){return e&&o.hasOwnProperty(n)},!0)&&!o.hasOwnProperty(i)},u()?c[c.length-1](f,o):(r=function(){return u()?(s(r),c[c.length-1](f,o)):void 0},t(r))})):n(null)},e=u.window.document,e&&(n=e.head||e.getElementsByTagName("head")[0]),f={script:function(t,i){var r,s,o;return n?(r=function(){return o.onload=o.onreadystatechange=o.onerror=null,n.removeChild(o),i&&i.call(u.window,s?null:"`script.onerror` fired")},o=e.createElement("script"),s=!1,o.type="text/javascript",o.charset="utf-8",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(n){return n=n||u.window.event,"load"===n.type||/loaded|complete/.test(o.readyState)&&(!e.documentMode||9>e.documentMode)?(s=!0,o.onload=o.onreadystatechange=o.onerror=null,w(r)):void 0},o.onerror=function(e){return e=e||u.window.event,o.onload=o.onreadystatechange=o.onerror=null,w(r)},n.insertBefore(o,n.lastChild)):i("`window.document` does not exist")},style:function(t,i){var r;return r=e.createElement("link"),r.rel="stylesheet",r.type="text/css",r.href=t,n.insertBefore(r,n.lastChild),w(i)}})}).call(this);